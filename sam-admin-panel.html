<!-- ğŸ›  SAM YÃ–NETÄ°CÄ° PANELÄ° (GELÄ°ÅTÄ°RÄ°LMÄ°Å TAM SÃœRÃœM) -->
<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="utf-8"/>
<title>SAM YÃ¶netici Paneli</title>
<style>
    html, body { margin: 0; padding: 0; height: 100%; overflow-y: auto; }
    body {
        background: url('/static/sam_admin_bg.png') no-repeat center center fixed;
        background-size: cover;
        font-family: 'Segoe UI', sans-serif;
        color: #e0e0e0;
    }
    .container {
        max-width: 1200px;
        margin: 60px auto;
        padding: 20px;
        background-color: rgba(0, 0, 0, 0.3);
        border-radius: 10px;
    }
    h2 {
        text-align: center;
        font-weight: 600;
        font-size: 30px;
        letter-spacing: 1px;
        margin-bottom: 40px;
        background: linear-gradient(90deg, #e6e6e6, #ffffff, #c0c0c0);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        text-shadow: 0 0 6px rgba(255, 255, 255, 0.1);
    }
    .panel-section {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        justify-content: space-between;
    }
    .panel-box {
        flex: 1 1 calc(48% - 10px);
        background-color: rgba(10, 10, 10, 0.5);
        padding: 20px;
        border-radius: 8px;
        min-width: 300px;
    }
    .panel-box.full { flex: 1 1 100%; }
    .panel-box h3 { color: #dddddd; margin-bottom: 10px; }
    textarea, input[type="text"] {
        width: 100%;
        padding: 10px;
        margin-top: 10px;
        background-color: rgba(20, 20, 20, 0.6);
        color: #f2f2f2;
        border: 1px solid rgba(100, 100, 100, 0.3);
        border-radius: 4px;
        resize: none !important;
    }
    .button {
        display: inline-block;
        margin-top: 10px;
        padding: 10px 20px;
        background-color: rgba(30, 30, 30, 0.6);
        border: 1px solid rgba(100, 100, 100, 0.3);
        border-radius: 5px;
        color: #e0e0e0;
        font-weight: 500;
        cursor: pointer;
        transition: background-color 0.2s ease-in-out;
    }
    .button:hover { background-color: rgba(60, 60, 60, 0.8); color: #ffffff; }
    .btn-destek { display: inline-block; background-color: #1f8ef1; color: #fff; padding: 10px 18px; text-decoration: none; border-radius: 8px; margin-top: 10px; font-weight: bold; transition: 0.3s ease; }
    .btn-destek:hover { background-color: #0c6cd4; }
    .danger { background-color: #5c1c1c !important; border-color: #a33; }
    .log-box {
        max-height: 250px;
        overflow-y: auto;
        background: rgba(0, 0, 0, 0.4);
        border: 1px solid rgba(255,255,255,0.1);
        padding: 10px;
        border-radius: 6px;
        font-size: 13px;
        color: #b5b5b5;
        white-space: pre-wrap;
    }
    @media (max-width: 768px) { .panel-box { flex: 1 1 100%; } }
</style>
</head>
<body style="overflow-y: auto;">
<div class="container">
    <h2>ğŸ›  SAM YÃ–NETÄ°CÄ° PANELÄ°</h2>

    <div class="panel-section">
        <div class="panel-box">
            <h3>ğŸ“¨ CanlÄ± Destek & Geri Bildirimler</h3>
            <p>KullanÄ±cÄ±lardan gelen destek mesajlarÄ±nÄ± yÃ¶net.</p>
            <a href="/admin/destek" target="_blank" class="btn-destek">YÃ¶netim SayfasÄ±na Git</a>
        </div>

        <div class="panel-box">
            <h3>ğŸ“„ Temizlik LoglarÄ±</h3>
            <p>Temizlik iÅŸlemlerinin geÃ§miÅŸini gÃ¶rÃ¼ntÃ¼le.</p>
            <a href="/temizlik_loglari" target="_blank" class="btn-destek">Log SayfasÄ±</a>
        </div>

        <div class="panel-box">
            <h3>ğŸ§  Bellek YÃ¶netimi</h3>
            <p>Bellek kontrol, silme veya optimizasyon iÅŸlemleri burada yapÄ±lÄ±r.</p>
            <button class="button">BelleÄŸi Optimize Et</button>
        </div>

        <div class="panel-box">
            <h3>ğŸ¨ Tema / GÃ¶rsel Ayar KontrolÃ¼</h3>
            <p>GerÃ§ek zamanlÄ± arayÃ¼z temasÄ± deÄŸiÅŸtir.</p>
            <button class="button" onclick="toggleTheme()">Tema DeÄŸiÅŸtir</button>
        </div>

        <div class="panel-box">
            <h3>ğŸ“‚ Dosya YÃ¶neticisi</h3>
            <p>/static/uploads klasÃ¶rÃ¼ndeki dosyalarÄ± gÃ¶rÃ¼ntÃ¼le ve sil.</p>
            <button class="button" onclick="manageFiles()">DosyalarÄ± YÃ¶net</button>
        </div>

        <div class="panel-box">
            <h3>ğŸ” AI Arama GÃ¼nlÃ¼ÄŸÃ¼</h3>
            <p>KullanÄ±cÄ±larÄ±n "ara:" komutlarÄ±nÄ± listele.</p>
            <button class="button" onclick="loadAILog()">GÃ¼nlÃ¼ÄŸÃ¼ GÃ¶rÃ¼ntÃ¼le</button>
        </div>

        <div class="panel-box">
            <h3>ğŸ’¾ VeritabanÄ± YÃ¶netimi</h3>
            <p>SQLite tablo boyutlarÄ± ve otomatik backup iÅŸlemleri.</p>
            <button class="button" onclick="manageDatabase()">VeritabanÄ±nÄ± YÃ¶net</button>
        </div>

        <div class="panel-box">
            <h3>ğŸ§¬ Ruh Hali Analizi Raporu</h3>
            <p>Son 24 saatteki kullanÄ±cÄ± duygu durum grafiÄŸi.</p>
            <button class="button" onclick="loadMoodReport()">Raporu GÃ¶rÃ¼ntÃ¼le</button>
        </div>

        <div class="panel-box">
            <h3>ğŸ•“ ZamanlanmÄ±ÅŸ GÃ¶revler</h3>
            <p>GÃ¼nlÃ¼k temizlik, e-posta bildirimleri ve sistem bakÄ±mÄ±.</p>
            <button class="button" onclick="manageScheduledTasks()">GÃ¶revleri YÃ¶net</button>
        </div>

        <div class="panel-box full">
            <h3>ğŸ“¢ Sistem Mesaj Konsolu</h3>
            <form method="POST" action="/admin/sistem-mesaji" id="sistemMesajiForm">
                <textarea name="sistem_mesaji" placeholder="Yeni sistem mesajÄ± yaz..." required></textarea>
                <button type="submit" class="button">GÃ¶nder</button>
            </form>
        </div>

        <div class="panel-box full">
            <h3>ğŸ§¾ GerÃ§ek ZamanlÄ± GÃ¼nlÃ¼k (Live Log Viewer)</h3>
            <div id="liveLogs" class="log-box">Loglar bekleniyor...</div>
            <button class="button" onclick="loadLiveLogs()">Yenile</button>
        </div>

        <div class="panel-box">
            <h3>âš™ï¸ Sunucu Yeniden BaÅŸlat / Durdur</h3>
            <button class="button" onclick="serverControl('restart')">ğŸ”„ Yeniden BaÅŸlat</button>
            <button class="button danger" onclick="serverControl('stop')">ğŸ›‘ Durdur</button>
        </div>

        <div class="panel-box">
            <h3>ğŸ§° GÃ¼venlik LoglarÄ±</h3>
            <p>GiriÅŸ denemeleri, IP adresleri, ve hatalar burada listelenir.</p>
            <button class="button" onclick="loadSecurityLogs()">LoglarÄ± GÃ¶r</button>
        </div>

        <div class="panel-box full">
            <h3>ğŸ”Œ CanlÄ± Socket Ä°zleme</h3>
            <div id="socketLog" class="log-box">Socket baÄŸlantÄ± bilgisi bekleniyor...</div>
            <button class="button" onclick="loadSocketStatus()">BaÄŸlantÄ±larÄ± Yenile</button>
        </div>

        <div class="panel-box">
            <h3>ğŸ¤– Yapay ZekÃ¢ GÃ¼ncelleme & Model SÃ¼rÃ¼mÃ¼</h3>
            <p>GÃ¼ncel model sÃ¼rÃ¼mÃ¼nÃ¼ kontrol et.</p>
            <button class="button" onclick="checkModelVersion()">Model Bilgisi</button>
        </div>

        <div class="panel-box">
            <h3>ğŸ”Š Sistem Duyuru Sesli Okuma</h3>
            <input type="text" id="ttsMessage" placeholder="Okunacak duyuru mesajÄ± yaz...">
            <button class="button" onclick="speakTTS()">Sesli Oku</button>
        </div>

        <div class="panel-box">
            <h3>ğŸ‘¥ KullanÄ±cÄ± YÃ¶netim Paneli</h3>
            <p>KullanÄ±cÄ± bilgilerini dÃ¼zenle, kaldÄ±r veya yetkilendir.</p>
            <a href="/admin/users" target="_blank" class="btn-destek">KullanÄ±cÄ± Paneline Git</a>
        </div>

        <div class="panel-box full">
            <h3>ğŸ’» GerÃ§ek ZamanlÄ± Sistem Durumu</h3>
            <div id="systemStatus" class="log-box">Durum bekleniyor...</div>
            <button class="button" onclick="loadSystemStatus()">GÃ¼ncelle</button>
        </div>

        <div class="panel-box full">
            <h3>ğŸ“‚ Yedekleme & DÄ±ÅŸa AktarÄ±m</h3>
            <div class="backup-buttons">
                <form action="/backup" method="POST"><button class="button" type="submit">Backup</button></form>
                <form action="/restore" method="POST"><button class="button" type="submit">Restore</button></form>
                <form action="/export-memory" method="GET"><button class="button" type="submit">Export Memory</button></form>
                <form action="/export-logs" method="GET"><button class="button" type="submit">Export Logs</button></form>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
// Tema DeÄŸiÅŸtirici
function toggleTheme() {
  document.body.style.background = document.body.style.background.includes('linear-gradient')
    ? "url('/static/sam_admin_bg.png') no-repeat center center fixed"
    : "linear-gradient(135deg, #0a0014 0%, #160030 100%)";
  document.body.style.backgroundSize = "cover";
}

// Sistem Mesaj GÃ¶nderimi
document.getElementById("sistemMesajiForm").addEventListener("submit", async (e) => {
  e.preventDefault();
  const data = new FormData(e.target);
  const res = await fetch(e.target.action, { method: "POST", body: data });
  if (res.redirected) Swal.fire("âœ… BaÅŸarÄ±lÄ±", "Sistem mesajÄ± gÃ¶nderildi.", "success");
  else Swal.fire("âŒ Hata", "Mesaj gÃ¶nderilemedi.", "error");
});

// GerÃ§ek ZamanlÄ± Log
async function loadLiveLogs() {
  const el = document.getElementById("liveLogs");
  el.textContent = "â³ Loglar yÃ¼kleniyor...";
  try {
    const res = await fetch("/admin/live-logs");
    const data = await res.text();
    el.textContent = data || "ğŸ“­ Log bulunamadÄ±.";
  } catch { el.textContent = "âŒ Hata oluÅŸtu."; }
}

// GÃ¼venlik LoglarÄ±
async function loadSecurityLogs() {
  const res = await fetch("/admin/security-logs");
  const data = await res.text();
  Swal.fire({ title: "GÃ¼venlik LoglarÄ±", html: `<pre>${data}</pre>`, width: 600 });
}

// Socket Ä°zleme
async function loadSocketStatus() {
  const res = await fetch("/admin/socket-status");
  const data = await res.text();
  document.getElementById("socketLog").textContent = data;
}

// Model SÃ¼rÃ¼mÃ¼
async function checkModelVersion() {
  const res = await fetch("/admin/model-info");
  const data = await res.json();
  Swal.fire("ğŸ§  Model Bilgisi", `Model: ${data.model}\nSÃ¼rÃ¼m: ${data.version}`, "info");
}

// Text-to-Speech
function speakTTS() {
  const msg = document.getElementById("ttsMessage").value.trim();
  if (!msg) return Swal.fire("âš ï¸", "Bir metin gir!", "warning");
  const utter = new SpeechSynthesisUtterance(msg);
  utter.lang = "tr-TR";
  speechSynthesis.speak(utter);
}

// Sunucu Kontrol
async function serverControl(cmd) {
  if (!confirm(`Sunucuyu ${cmd === "restart" ? "yeniden baÅŸlatmak" : "durdurmak"} istediÄŸine emin misin?`)) return;
  await fetch(`/admin/server/${cmd}`, { method: "POST" });
  Swal.fire("ğŸ› ", `Sunucu ${cmd} iÅŸlemi gÃ¶nderildi.`, "info");
}

// Sistem Durumu
async function loadSystemStatus() {
  const res = await fetch("/admin/system-status");
  const data = await res.text();
  document.getElementById("systemStatus").textContent = data;
}

// Ek Fonksiyonlar
function manageFiles() { Swal.fire("ğŸ“‚ Dosya YÃ¶neticisi", "Dosya yÃ¶netim ekranÄ± aÃ§Ä±lacak.", "info"); }
function loadAILog() { Swal.fire("ğŸ” AI Arama GÃ¼nlÃ¼ÄŸÃ¼", "KullanÄ±cÄ± arama komutlarÄ± listelenecek.", "info"); }
function manageDatabase() { Swal.fire("ğŸ’¾ VeritabanÄ± YÃ¶netimi", "SQLite tablo boyutlarÄ± ve backup yÃ¶netimi.", "info"); }
function loadMoodReport() { Swal.fire("ğŸ§¬ Ruh Hali Analizi", "Son 24 saat kullanÄ±cÄ± duygu durum grafiÄŸi.", "info"); }
function manageScheduledTasks() { Swal.fire("ğŸ•“ ZamanlanmÄ±ÅŸ GÃ¶revler", "GÃ¶revler ve planlamalar burada yÃ¶netilecek.", "info"); }
</script>
</body>
</html>
